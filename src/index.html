<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>P2P Chatter Lite - Privacy-Focused Messaging</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <!-- Header -->
    <header class="header">
      <div class="header-content">
        <h1>P2P Chatter Lite ğŸ”</h1>
        <p class="tagline">Lightweight â€¢ Secure â€¢ Decentralized</p>
      </div>
      <div class="header-controls">
        <button id="settingsBtn" class="header-btn" title="Settings">âš™ï¸</button>
        <button id="aboutBtn" class="header-btn" title="About">â„¹ï¸</button>
      </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Sidebar -->
      <aside class="sidebar">
        <div class="sidebar-section">
          <h3>Quick Setup</h3>
          <button id="shortcutBtn" class="action-btn primary">
            ğŸ“Œ Create Desktop Shortcut
          </button>
          <button id="testBotBtn" class="action-btn secondary" title="Run connection test">
            ğŸ¤– Test Settings
          </button>
          <button id="nukeBtn" class="action-btn danger" title="Clear all data and close app">
            â˜¢ï¸ NUKE Everything
          </button>
          
          <!-- File Transfer Menu -->
          <div class="dropdown-container">
            <button id="fileTransferBtn" class="dropdown-toggle">
              ğŸ“¤ File Transfer â–¼
            </button>
            <div id="fileTransferMenu" class="dropdown-menu" style="display: none;">
              <div class="menu-section">
                <h4>ğŸ” Secure File Transfer</h4>
                <button id="createSecureFileBtn" class="menu-option-btn">
                  â• Create Protected File
                </button>
                <button id="receiveFileBtn" class="menu-option-btn">
                  â¬‡ï¸ Receive File
                </button>
                <button id="viewFilesBtn" class="menu-option-btn">
                  ğŸ“ View Shared Files
                </button>
              </div>
            </div>
          </div>

          <!-- Crypto Transfer Menu -->
          <div class="dropdown-container">
            <button id="cryptoTransferBtn" class="dropdown-toggle">
              ğŸ’° Crypto Transfer â–¼
            </button>
            <div id="cryptoTransferMenu" class="dropdown-menu" style="display: none;">
              <div class="menu-section">
                <h4>ğŸ’¸ Cryptocurrency Transfer</h4>
                <button id="createCryptoTransferBtn" class="menu-option-btn">
                  ğŸ’ Create Transfer
                </button>
                <button id="viewCryptoTransactionsBtn" class="menu-option-btn">
                  ğŸ“Š View Transactions
                </button>
                <button id="cryptoSettingsBtn" class="menu-option-btn">
                  âš™ï¸ Configure Currencies
                </button>
              </div>
            </div>
          </div>

          <!-- PGP Authentication Menu -->
          <div class="dropdown-container">
            <button id="pgpAuthBtn" class="dropdown-toggle">
              ğŸ”‘ PGP Auth â–¼
            </button>
            <div id="pgpAuthMenu" class="dropdown-menu" style="display: none;">
              <div class="menu-section">
                <h4>ğŸ” PGP Authentication (Optional)</h4>
                <button id="generatePgpKeysBtn" class="menu-option-btn">
                  ğŸ”§ Generate Keys
                </button>
                <button id="viewPgpKeysBtn" class="menu-option-btn">
                  ğŸ‘ï¸ View Keys
                </button>
                <button id="pgpSignMessageBtn" class="menu-option-btn">
                  âœï¸ Sign Message
                </button>
                <button id="pgpVerifyMessageBtn" class="menu-option-btn">
                  âœ… Verify Signature
                </button>
              </div>
            </div>
          </div>
        </div>
        
        <!-- File Creation Dialog -->
        <div id="fileCreationDialog" class="modal" style="display: none;">
          <div class="modal-content">
            <button class="close-btn">&times;</button>
            <h2>Create Protected File</h2>
            <p>Create a password-protected file to share with connected peers</p>
            
            <div class="settings-section">
              <h3>File Details</h3>
              <label>
                <span>File Name:</span>
                <input type="text" id="fileName" placeholder="e.g., document.txt" maxlength="50">
              </label>
              <label>
                <span>File Content:</span>
                <textarea id="fileContent" placeholder="Enter file content here..." rows="6"></textarea>
              </label>
              <label>
                <span>Protection Password:</span>
                <input type="password" id="filePassword" placeholder="Enter protection password" maxlength="32">
              </label>
              <label>
                <span>Confirm Password:</span>
                <input type="password" id="filePasswordConfirm" placeholder="Confirm password" maxlength="32">
              </label>
              <label class="checkbox-label">
                <input type="checkbox" id="fileEncryption" checked>
                <span>Use AES-256 Encryption</span>
              </label>
            </div>
            
            <div class="settings-section">
              <h3>Access Control</h3>
              <label>
                <span>Allowed Recipients:</span>
                <input type="text" id="allowedRecipients" placeholder="Enter peer usernames (comma-separated)">
              </label>
              <label>
                <span>Expiration (hours):</span>
                <input type="number" id="fileExpiration" placeholder="0 = never expires" min="0" max="1000" value="0">
              </label>
            </div>
            
            <div style="display: flex; gap: 10px; margin-top: 20px;">
              <button id="createFileBtn" class="action-btn primary" style="flex: 1;">
                âœ“ Create & Export File
              </button>
              <button id="cancelFileBtn" class="action-btn" style="flex: 1;">
                âœ• Cancel
              </button>
            </div>
            
            <div id="fileStatus" style="margin-top: 15px; padding: 10px; border-radius: 4px; display: none;">
              <div id="fileStatusText"></div>
            </div>
          </div>
        </div>

        <!-- Crypto Transfer Dialog -->
        <div id="cryptoTransferDialog" class="modal" style="display: none;">
          <div class="modal-content">
            <button class="close-btn">&times;</button>
            <h2>ğŸ’° Create Crypto Transfer</h2>
            <p>Send cryptocurrency to peer with optional PGP signature</p>
            
            <div class="settings-section">
              <h3>Transfer Details</h3>
              <label>
                <span>Recipient (Peer Username):</span>
                <input type="text" id="cryptoRecipient" placeholder="Enter peer's username" maxlength="20">
              </label>
              <label>
                <span>Currency:</span>
                <select id="cryptoCurrency">
                  <option value="BTC">Bitcoin (BTC)</option>
                  <option value="ETH">Ethereum (ETH)</option>
                  <option value="XMR">Monero (XMR)</option>
                  <option value="LTC">Litecoin (LTC)</option>
                  <option value="USDT">USDT (Tether)</option>
                  <option value="DOGE">Dogecoin (DOGE)</option>
                  <option value="ZEC">Zcash (ZEC)</option>
                </select>
              </label>
              <label>
                <span>Amount:</span>
                <input type="number" id="cryptoAmount" placeholder="Enter amount" min="0" step="0.00000001">
              </label>
              <label>
                <span>Exchange Type:</span>
                <select id="exchangeType">
                  <option value="direct">Direct Transfer (P2P)</option>
                  <option value="escrow">Escrow Protected</option>
                  <option value="atomic">Atomic Swap</option>
                  <option value="lightning">Lightning Network</option>
                </select>
              </label>
              <label>
                <span>Wallet Address (Optional):</span>
                <input type="text" id="cryptoWalletAddress" placeholder="Destination wallet address">
              </label>
              <label>
                <span>Transaction Password:</span>
                <input type="password" id="cryptoPassword" placeholder="Confirm with password" maxlength="32">
              </label>
            </div>

            <div class="settings-section">
              <h3>PGP Signature (Optional)</h3>
              <label class="checkbox-label">
                <input type="checkbox" id="signWithPgp">
                <span>Sign transaction with PGP (adds authentication)</span>
              </label>
              <div id="pgpSignatureSection" style="display: none; margin-top: 10px;">
                <label>
                  <span>PGP Private Key:</span>
                  <textarea id="pgpPrivateKeyForSignature" placeholder="Paste your PGP private key" rows="4"></textarea>
                </label>
              </div>
            </div>

            <div style="display: flex; gap: 10px; margin-top: 20px;">
              <button id="sendCryptoBtn" class="action-btn primary" style="flex: 1;">
                ğŸ’³ Send Crypto
              </button>
              <button id="cancelCryptoBtn" class="action-btn" style="flex: 1;">
                âœ• Cancel
              </button>
            </div>

            <div id="cryptoStatus" style="margin-top: 15px; padding: 10px; border-radius: 4px; display: none;">
              <div id="cryptoStatusText"></div>
            </div>
          </div>
        </div>

        <!-- PGP Key Management Dialog -->
        <div id="pgpKeyDialog" class="modal" style="display: none;">
          <div class="modal-content">
            <button class="close-btn">&times;</button>
            <h2>ğŸ”‘ PGP Key Management</h2>
            <p>Generate, view, and manage PGP authentication keys (optional security enhancement)</p>
            
            <div class="settings-section">
              <h3>Generate New Keys</h3>
              <label>
                <span>Key Identifier (e.g., name or email):</span>
                <input type="text" id="pgpKeyId" placeholder="Your name or identifier" maxlength="50">
              </label>
              <label>
                <span>Key Size:</span>
                <select id="pgpKeySize">
                  <option value="2048">2048-bit (Standard)</option>
                  <option value="4096">4096-bit (High Security)</option>
                </select>
              </label>
              <button id="generatePgpBtn" class="action-btn primary" style="width: 100%; margin-top: 10px;">
                ğŸ”§ Generate Keys
              </button>
              <div id="pgpGenerationStatus" style="margin-top: 10px; display: none;"></div>
            </div>

            <div class="settings-section">
              <h3>Current Keys</h3>
              <div id="pgpKeysDisplay" style="background: rgba(0,0,0,0.3); padding: 10px; border-radius: 4px; max-height: 200px; overflow-y: auto;">
                <p style="color: #888;">No keys generated yet</p>
              </div>
            </div>

            <div class="settings-section">
              <h3>Import Existing Key</h3>
              <label>
                <span>PGP Public Key:</span>
                <textarea id="pgpPublicKeyImport" placeholder="Paste PGP public key" rows="6"></textarea>
              </label>
              <button id="importPgpKeyBtn" class="action-btn primary" style="width: 100%; margin-top: 10px;">
                ğŸ“¥ Import Key
              </button>
            </div>

            <div style="margin-top: 20px;">
              <button id="closePgpDialogBtn" class="action-btn" style="width: 100%;">
                Close
              </button>
            </div>

            <div id="pgpDialogStatus" style="margin-top: 15px; padding: 10px; border-radius: 4px; display: none;"></div>
          </div>
        </div>

        <div class="sidebar-section">
          <h3>Settings & Themes</h3>
          <div class="dropdown-container">
            <button id="themeMenuBtn" class="dropdown-toggle">
              ğŸ¨ Themes & Options â–¼
            </button>
            <div id="themeMenu" class="dropdown-menu" style="display: none;">
              <div class="menu-section">
                <h4>ğŸ¨ Themes</h4>
                <button class="theme-option" data-theme="matrix">Matrix Green</button>
                <button class="theme-option" data-theme="cyberpunk">Cyberpunk</button>
                <button class="theme-option" data-theme="terminal">Terminal Amber</button>
                <button class="theme-option" data-theme="hacker-red">Hacker Red</button>
                <button class="theme-option" data-theme="dark-web">Dark Web</button>
                <button class="theme-option" data-theme="neon-void">Neon Void</button>
                <button class="theme-option" data-theme="retro-crt">Retro CRT</button>
                <button class="theme-option" data-theme="glitch">Glitch Matrix</button>
                <button class="theme-option" data-theme="acid">Acid Green</button>
                <button class="theme-option" data-theme="plasma">Plasma Storm</button>
                <button class="theme-option" data-theme="darknet">Darknet</button>
              </div>
              <div class="menu-section">
                <h4>ğŸ’¬ Chat Options</h4>
                <label class="menu-option">
                  <input type="checkbox" id="readReceipts"> Message read receipts
                </label>
                <label class="menu-option">
                  <input type="checkbox" id="typingIndicator"> Show typing status
                </label>
                <label class="menu-option">
                  <input type="checkbox" id="messageReactions"> Allow reactions (ğŸ˜€ğŸ‘)
                </label>
                <label class="menu-option">
                  <input type="checkbox" id="pinMessages"> Pin important messages
                </label>
                <label class="menu-option">
                  <input type="checkbox" id="soundNotifications"> Sound notifications
                </label>
              </div>
            </div>
          </div>
        </div>

        <div class="sidebar-section">
          <h3>Status</h3>
          <div id="status" class="status-box">
            <span class="status-dot offline"></span>
            <span>Not connected</span>
          </div>
        </div>
      </aside>

      <!-- Chat Area -->
      <section class="chat-container">
        <div class="chat-header">
          <h2 id="chatTitle">Welcome to P2P Chatter Lite</h2>
        </div>

        <div class="chat-messages" id="chatMessages">
          <div class="welcome-message">
            <h3>Welcome! ğŸ‘‹</h3>
            <p>P2P Chatter Lite is a lightweight, privacy-focused messaging application.</p>
            <ul>
              <li><strong>Fast:</strong> Starts in under 2 seconds</li>
              <li><strong>Secure:</strong> Military-grade AES-256-GCM encryption</li>
              <li><strong>Simple:</strong> Clean, intuitive interface</li>
              <li><strong>Private:</strong> Messages stored locally only</li>
              <li><strong>Decentralized:</strong> Peer-to-peer communication</li>
            </ul>
            <h4>Getting Started:</h4>
            <ol>
              <li>Click "Create Desktop Shortcut" for easy access</li>
              <li>Share your username with a peer</li>
              <li>Enter their username to connect</li>
              <li>Start encrypted messaging</li>
            </ol>
          </div>
        </div>

        <div class="chat-input-area">
          <!-- OPSEC Status Bar -->
          <div class="opsec-status-bar">
            <div class="opsec-indicator">
              <span class="opsec-label">Encryption:</span>
              <span id="encryptionStatus" class="status-indicator">OFF</span>
            </div>
            <div class="opsec-indicator">
              <span class="opsec-label">Tor:</span>
              <span id="torStatus" class="status-indicator">OFF</span>
            </div>
            <div class="opsec-indicator">
              <span class="opsec-label">Security:</span>
              <span id="securityLevel" class="status-indicator">âš ï¸ LOW</span>
            </div>
          </div>

          <div class="connection-setup">
            <div class="username-input-group">
              <div class="username-dropdown-container">
                <label>Your Username:</label>
                <div class="username-selector">
                  <select id="usernameDropdown" class="username-dropdown">
                    <option value="">Loading usernames...</option>
                  </select>
                  <button id="regenerateUsernameBtn" class="btn-icon" title="Generate new username">ğŸ”„</button>
                  <button id="copyUsernameBtn" class="btn-icon" title="Copy to clipboard">ğŸ“‹</button>
                </div>
              </div>
              
              <!-- Network Monitor Panel -->
              <div class="network-monitor">
                <div class="network-header">
                  <span class="monitor-title">Network Status</span>
                  <span class="monitor-toggle" id="toggleNetworkMonitor">ğŸ“Š</span>
                </div>
                <div class="network-panel" id="networkPanel" style="display: none;">
                  <div class="network-info">
                    <div class="network-item">
                      <span class="label">Tor Status:</span>
                      <span class="value" id="torStatusDisplay">
                        <span class="status-dot off"></span> Disconnected
                      </span>
                    </div>
                    <div class="network-item">
                      <span class="label">Processes:</span>
                      <span class="value" id="processCount">0</span>
                    </div>
                    <div class="network-item">
                      <span class="label">Connection:</span>
                      <span class="value" id="connectionStatus">
                        <span class="status-dot offline"></span> Idle
                      </span>
                    </div>
                  </div>
                  <div class="process-list" id="processList" style="font-size: 10px; max-height: 150px; overflow-y: auto; margin-top: 10px; padding: 5px; background: rgba(0,0,0,0.3); border-radius: 3px;">
                    <div style="color: #888;">No active processes</div>
                  </div>
                </div>
              </div>
              <div class="password-input">
                <label>Connection Password:</label>
                <input type="password" id="passwordInput" placeholder="Share with peer outside app" maxlength="32">
              </div>
            </div>
            <div class="peer-username-input">
              <label>Peer Username:</label>
              <input type="text" id="peerUsernameInput" placeholder="Enter peer's username" maxlength="20" disabled>
            </div>
            <div class="security-controls">
              <button id="encryptionToggle" class="btn-encrypt-flash" title="Toggle encryption">ğŸ” ENCRYPT</button>
              <button id="torToggle" class="btn-tor" title="Toggle Tor">ğŸ§… TOR</button>
              <button id="connectBtn" class="btn-small">Connect</button>
            </div>
          </div>
          <div class="message-input">
            <input type="text" id="messageInput" placeholder="Type a message..." disabled>
            <button id="sendBtn" class="btn-small" disabled>Send</button>
          </div>
        </div>
        
        <!-- Screenshot Alert -->
        <div id="screenshotAlert" class="screenshot-alert" style="display: none;">
          <span class="alert-icon">ğŸ“¸</span>
          <span class="alert-text">Screenshot detected! Your messages may have been captured.</span>
        </div>
      </section>
    </main>

    <!-- About Dialog -->
    <div id="aboutDialog" class="modal" style="display: none;">
      <div class="modal-content">
        <button class="close-btn">&times;</button>
        <h2>About P2P Chatter Lite</h2>
        <p><strong>Version:</strong> <span id="appVersion">1.0.0</span></p>
        <p><strong>Description:</strong> A lightweight, privacy-focused peer-to-peer messaging application with end-to-end encryption.</p>
        
        <h3>Features</h3>
        <ul>
          <li>ğŸ” AES-256-GCM end-to-end encryption</li>
          <li>ğŸ”— Peer-to-peer messaging</li>
          <li>ğŸ’¨ Lightweight design (~50MB install)</li>
          <li>âš¡ Fast startup (< 2 seconds)</li>
          <li>ğŸ“± Simple, intuitive interface</li>
          <li>ğŸ–¥ï¸ Desktop integration with shortcuts</li>
          <li>ğŸ”“ Open source (MIT License)</li>
        </ul>

        <h3>Technology</h3>
        <ul>
          <li><strong>Framework:</strong> Electron</li>
          <li><strong>Encryption:</strong> AES-256-GCM</li>
          <li><strong>License:</strong> MIT</li>
          <li><strong>Platform:</strong> Windows, macOS, Linux</li>
        </ul>

        <h3>Quick Start</h3>
        <ol>
          <li>Create a desktop shortcut (see sidebar)</li>
          <li>Enter your username</li>
          <li>Share username with peer</li>
          <li>Connect to peer's username</li>
          <li>Start encrypted messaging!</li>
        </ol>

        <p style="margin-top: 20px; color: #888; font-size: 12px;">
          Made with â¤ï¸ by antX/bad-antics<br>
          Privacy. Anonymity. Freedom.<br>
          <a href="https://github.com/bad-antics/p2p-chatter-lite" target="_blank">View on GitHub</a>
        </p>
        
        <div style="margin-top: 30px; padding-top: 20px; border-top: 1px solid #444;">
          <h4 style="margin: 0 0 10px 0;">ğŸ† cr3dz</h4>
          <p style="margin: 8px 0; color: #aaa;"><strong>FairyRos3</strong> - UI/UX design & user experience</p>
          <p style="margin: 8px 0; color: #aaa;"><strong>sleep</strong> - Inspiration & security guidance</p>
          <p style="margin: 8px 0; color: #aaa;"><strong>no.login</strong> - P2P architecture & decentralization principles</p>
          <p style="font-size: 11px; color: #666; margin-top: 15px;">Built with passion for privacy advocates</p>
        </div>
      </div>
    </div>

    <!-- Settings Dialog -->
    <div id="settingsDialog" class="modal" style="display: none;">
      <div class="modal-content">
        <button class="close-btn">&times;</button>
        <h2>Settings</h2>

        <div class="settings-section">
          <h3>Desktop Shortcut</h3>
          <p>Create a shortcut on your desktop for quick access</p>
          <button id="createShortcutBtn" class="action-btn primary">
            ğŸ“Œ Create Desktop Shortcut
          </button>
          <div id="shortcutStatus" style="margin-top: 10px; display: none;" class="status-message">
            âœ… Desktop shortcut created successfully!
          </div>
        </div>

        <div class="settings-section">
          <h3>Appearance</h3>
          <label>
            <input type="checkbox" id="darkModeToggle" checked>
            Dark mode
          </label>
        </div>

        <div class="settings-section">
          <h3>Privacy</h3>
          <label>
            <input type="checkbox" id="localStorageToggle" checked>
            Store messages locally
          </label>
          <label>
            <input type="checkbox" id="autoDestructToggle" checked>
            Auto-destruct messages after 1 hour
          </label>
        </div>

        <div class="settings-section">
          <h3>OPSEC</h3>
          <label>
            <input type="checkbox" id="anonymousToggle">
            Anonymous mode (hide username from logs)
          </label>
          <label>
            <input type="checkbox" id="noLogsToggle">
            No message logs (ephemeral only)
          </label>
        </div>

        <div class="settings-section">
          <h3>About</h3>
          <p><strong>Version:</strong> <span id="settingsVersion">1.0.0</span></p>
          <p><strong>License:</strong> MIT</p>
          <p><strong>Author:</strong> antX/bad-antics</p>
          <h4 style="margin-top: 15px;">ğŸ† cr3dz</h4>
          <p>Special thanks to:</p>
          <ul style="margin: 5px 0; padding-left: 20px;">
            <li><strong>FairyRos3</strong> - UI/UX design & user experience</li>
            <li><strong>sleep</strong> - Inspiration & security guidance</li>
            <li><strong>no.login</strong> - P2P & decentralization insights</li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>
